\subsection{Physical Schema}

Here we can see the SQL statements which can be used to create the tables we defined above. These statements are specific to Oracle Database.

\subsubsection{Users Table}

Displayed here is the SQL statement that creates the \verb`users` table. An 8 digit number for the ID (and all ID fields of subsequent tables) is large enough since we will not have more than one million records in the entire database. The ID field is to be generated by the database.

Usernames we limit to twenty characters, and email addresses to 320. This is because 320 characters is the length of the longest possible email address. The \verb`password` field will actually store a base 64 encoded SHA256 hash of the password, which takes 44 bytes.

A reasonable cap for the total number of points a user can accumulate is a ten digit number. This conclusion is based off researching the highest number of points any user has ever accumulated on popular websites which implement similar scoring systems such as Stack Overflow and Reddit, then adding a couple of digits to be on the safe side. By default, a user starts with no points.

\VerbatimInput[label=\fbox{\color{Black}/sql/create-table/users.sql}]{../sql/create-table/users.sql}

\subsubsection{Posts Table}

Below is the SQL statement which creates our table that contains the IDs of all the posts.

\VerbatimInput[label=\fbox{\color{Black}/sql/create-table/posts.sql}]{../sql/create-table/posts.sql}

\subsubsection{Questions Table}

This is the SQL command that generates the questions table. The field \verb`body` is of the CLOB data type, which is short for `character large object'. The \verb`varchar` data type has much smaller length restrictions which would not suffice to allow for long questions.

In this table, we have introduced for the first time the \verb`timestamp` field in SQL. Its data type is \verb`date`, which gives us a date and time representation, accurate up to one second, which is enough for us to record the creation dates of questions (as well as answers and comments). By default, it is assigned the current date and time at the time of insertion of each row. The \verb`author_id` is the ID of the user who wrote this question.

\VerbatimInput[label=\fbox{\color{Black}/sql/create-table/questions.sql}]{../sql/create-table/questions.sql}

\subsubsection{Answers Table}

Now we come to the SQL statement for the \verb`answers` table. It is mostly identical to the \verb`questions` table, with the exceptions of the field \verb`accepted` which is a boolean, and the field \verb`question_id` which is the question that this answer is responding. Since Oracle does not have a built in boolean data type, we use the number data type and limit it to one digit, and we decide that 0 means false and anything else means true.

\VerbatimInput[label=\fbox{\color{Black}/sql/create-table/answers.sql}]{../sql/create-table/answers.sql}

\subsubsection{Comments Table}

This table is similar to the two previous tables. The only new column is the \verb`parent_post_id` column. This column is a foreign key to the comment's direct parent.

\VerbatimInput[label=\fbox{\color{Black}/sql/create-table/comments.sql}]{../sql/create-table/comments.sql}

\subsubsection{Topics Table}

The \verb`topics` table contains an \verb`id` column like most of the previous tables, as well as a label and a description. The label must be unique and is limited to twenty characters.

\VerbatimInput[label=\fbox{\color{Black}/sql/create-table/topics.sql}]{../sql/create-table/topics.sql}

\subsubsection{Votes Table}

This table consists of two columns which together form the primary key, and each of which are a foreign key in their own right. Each row signifies that a particular user voted on a particular post.

\VerbatimInput[label=\fbox{\color{Black}/sql/create-table/votes.sql}]{../sql/create-table/votes.sql}

\subsubsection{Follows Table}

With this SQL statement we can create the \verb`follows` table. It has a very similar structure to the \verb`votes` table. Here, each row represents that a certain user follows some topic.

\VerbatimInput[label=\fbox{\color{Black}/sql/create-table/follows.sql}]{../sql/create-table/follows.sql}

\subsubsection{Relates To Table}

This SQL command creates the \verb`relates_to` table. Once again, it has an almost identical structure to the previous two tables. Each of these rows records that a specific question relates to some topic.

\VerbatimInput[label=\fbox{\color{Black}/sql/create-table/relates\_to.sql}]{../sql/create-table/relates_to.sql}